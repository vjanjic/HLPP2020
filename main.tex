\documentclass[smallextended]{svjour3}

\usepackage{booktabs} % For formal tables

\usepackage{amsmath}
\usepackage{tikz}
\usepackage{pgfplots}
\pgfplotsset{compat=1.3}
\usepackage{graphicx, epsfig}
\usepackage{xspace}  %% Package used for the \NB{} abbreviation
\usepackage{algorithm}
\usepackage{algpseudocode}
\usepackage{color}
\usepackage{url}
\usepackage{hyperref}
\usepackage{listings}
\usepackage{tikz}% http://ctan.org/pkg/pgf
\usetikzlibrary{calc}
\usepackage{amssymb,amsmath}
\usepackage{subcaption}
%\lstset{
%  basicstyle=\small\ttfamily,
%  columns=fullflexible,
%}

\lstset{language=C++,
 basicstyle=\ttfamily\lst@ifdisplaystyle\scriptsize\fi,%\scriptsize, %aboveskip={-5ex},
 columns=fullflexible,
%basicstyle={\ttfamily\singlespacing},aboveskip={-4ex},
 keywordstyle=\color{blue}\ttfamily,
 stringstyle=\color{red}\ttfamily,
 commentstyle=\color{cyan}\ttfamily,
 captionpos=t,
  %numbers=none, %left,
 numbers=left,
  %numberstyle=\scriptsize,
  %stepnumber=1,
  %numbersep=6pt,
  showstringspaces=false,
  breaklines=true,
  frame=lines,
  otherkeywords={[[,]],::,constexpr},
  emph={rpr,kernel,target,in,out,pipeline,stream,farm,pipe,map,sync,async, rprmv, base, split, unroll, Pipeline, Farm, parallel_execution_ff},
  emphstyle={\color{magenta}\bfseries}
}


% Copyright
%\setcopyright{none}
%\setcopyright{acmcopyright}
%\setcopyright{acmlicensed}
%\setcopyright{rightsretained}
%\setcopyright{usgov}
%\setcopyright{usgovmixed}
%\setcopyright{cagov}
%\setcopyright{cagovmixed}


% DOI
%\acmDOI{10.475/123_4}

% ISBN
%\acmISBN{123-4567-24-567/08/06}

%\acmArticle{4}
%\acmPrice{15.00}

% These commands are optional
%\acmBooktitle{Transactions of the ACM Woodstock conference}
%\editor{Jennifer B. Sartor}
%\editor{Theo D'Hondt}
%\editor{Wolfgang De Meuter}


\begin{document}
\title{Restoration of Legacy Parallelism in C and C++ Applications}
%
%\titlerunning{Abbreviated paper title}
% If the paper title is too long for the running head, you can set
% an abbreviated paper title here
%
\author{Vladimir Janjic         \and
	Christopher Brown \and 
	Adam D. Barwell \and
}

%\authorrunning{Short form of author list} % if too long for running head

\institute{
		V. Janjic \at
	School of Science and Engineering, University of Dundee, UK. \\
	\email{vjanjic001@dundee.ac.uk}
	\and
	C. Brown, A. Barwell \at
	School of Computer Science, University of St Andrews, UK. \\
	\email{cmb21,adb23@st-andrews.ac.uk}           %  \\
}

\date{Received: date / Accepted: date}
% The correct dates will be entered by the editor

\maketitle
%
\begin{abstract}
    \emph{Parallel patterns} are a high-level programming paradigm that enables non-experts in parallelism to develop structured parallel programs that are maintainable, adaptive and portable whilst also achieving good performance on a variety of parallel systems. However, there still exists a large base of \emph{legacy-parallel code} that was developed using ad-hoc methods and incorporating low-level parallel/concurrency libraries such as \emph{pthreads} without any parallel patterns in the fundamental design. This code would benefit from being restructured and rewritten into pattern-based code. However, the process of rewriting the code is tedious and error-prone, due to typical concurrency and pthreading code being closely intertwined throughout the business logic of the program. In this paper, we present a new software restoration methodology, to transform legacy-parallel programs implemented using e.g. \emph{pthreads} into their structured patterned equivalent. We demonstrate our restoration technique on a number of benchmarks, allowing us to introduce patterned parallelism in the resulting code; we record improvements in cyclomatic complexity and speedups.

\keywords{Parallel patterns, restoration, pthreads, refactoring, code analysis}
\end{abstract}

%
% The code below should be generated by the tool at
% http://dl.acm.org/ccs.cfm
% Please copy and paste the code instead of the example below.
%

\input{main-body}

\bibliographystyle{spmpsci}      % mathematics and physical sciences
%\bibliographystyle{spphys}       % APS-like style for physics
%\bibliography{hlpp,RePhrase,rephrase2}   % name your BibTeX data base
\bibliography{pruned}

\end{document}
